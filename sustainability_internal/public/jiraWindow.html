<!DOCTYPE html>
<html>
  <head>
    <style>
      #atlwdg-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        max-height: 100%;
      }
    </style>
  </head>

  <body>
    <!-- Allen Interactions Jira window scropt -->
    <script
      type="text/javascript"
      src="https://bthvedt.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/1kwsvv/b/8/c95134bc67d3a521bb3f4331beb9b804/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?locale=en-US&collectorId=c8b64aa7"
    ></script>

    <script type="text/javascript">
      const urlSearchParams = new URLSearchParams(window.location.search)
      const params = Object.fromEntries(urlSearchParams.entries())

      // stuff that the custom jira colletor uses. Note: when creating the collector, the type must be "custom"
      window.ATL_JQ_PAGE_PROPS = {
        fieldValues: {
          // see https://projecturl.atlassian.net/rest/api/2/field to see custom fields. The format is customfield_ID i.e. customfield_10123
          // I currently don't have permission to edit the fields so I just add the location to the description. Maybe shoudl change if I get permissino later
          summary: params["loc"],
        },
        triggerFunction: function (showCollectorDialog) {
          setTimeout(() => {
            showCollectorDialog()
          }, 10)

          setInterval(() => {
            if (!document.getElementById("atlwdg-frame")) {
              window.self.close()
            }
          }, 10)
        },
      }
    </script>
  </body>
</html>
